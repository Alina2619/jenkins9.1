pipeline {
    agent any

    tools {
        // Optional: Set up Maven installation if it's globally installed in Jenkins
        maven 'Maven_3.8.1'  // Replace with your Maven installation name
    }

    environment {
        // Define any global environment variables if required
        MAVEN_HOME = 'C:\\path\\to\\your\\maven' // Adjust the path to Maven
    }

    stages {
        // Stage to check out the code from the Git repository
        stage('Checkout') {
            steps {
                checkout scm
            }
        }

        // Stage to install Maven (if not already installed on the system)
        stage('Install Maven') {
            steps {
                script {
                    echo 'Installing Maven...'
                    // Uncomment the following lines if Maven needs to be installed
                    //bat 'curl -sL https://archive.apache.org/dist/maven/maven-3/3.8.1/binaries/apache-maven-3.8.1-bin.tar.gz -o maven.tar.gz'
                    //bat 'tar -xzvf maven.tar.gz'
                    //bat 'set MAVEN_HOME=%cd%\\apache-maven-3.8.1'
                    //bat 'set PATH=%MAVEN_HOME%\\bin;%PATH%'
                }
            }
        }

        // Stage to build the project using Maven
        stage('Build') {
            steps {
                script {
                    echo 'Building project using Maven...'
                    bat 'mvn clean install'  // Build the project with Maven
                }
            }
        }

        // Stage to run unit tests using Maven
        stage('Test') {
            steps {
                script {
                    echo 'Running tests...'
                    bat 'mvn test'  // Run tests using Maven
                }
            }
        }

        // Stage to deploy the application
        stage('Deploy') {
            steps {
                script {
                    echo 'Deploying application...'
                    // Replace with your deployment command
                    bat './deploy.bat'  // Or whatever deploy script you use
                }
            }
        }
    }

    post {
        success {
            echo 'Pipeline completed successfully!'
        }
        failure {
            echo 'Pipeline failed!'
        }
    }
}






